(this.webpackJsonpcovid19dasboard=this.webpackJsonpcovid19dasboard||[]).push([[0],{165:function(e,t,a){},166:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){"use strict";a.r(t);var n=a(11),r=a.n(n),s=a(23),l=a(0),c=a.n(l),o=a(60),i=a.n(o),u=a(5),d=a(6),m=function(){function e(t,a){Object(u.a)(this,e),this.code=t,this.name=a,this.recordSeries=[],this.population=null,this.mortalityRate=null}return Object(d.a)(e,[{key:"setRecordSeries",value:function(e){this.recordSeries=e;for(var t=0;t<this.recordSeries.length;t++)this.recordSeries[t].date=new Date(this.recordSeries[t].date)}},{key:"getCases",value:function(){for(var e=0,t=0;t<this.recordSeries.length;t++)e+=this.recordSeries[t].cases;return e}},{key:"getDeaths",value:function(){for(var e=0,t=0;t<this.recordSeries.length;t++)e+=this.recordSeries[t].deaths;return e}},{key:"getCrudeDeathsPerDay",value:function(){return null===this.mortalityRate?null:~~(this.population*this.mortalityRate/1e3/365.25)}},{key:"getCasesPerMillion",value:function(){return this.getCases()/(this.population/1e6)}},{key:"getDeathsPerMillion",value:function(){return this.getDeaths()/(this.population/1e6)}},{key:"getDataAge",value:function(){var e=this.recordSeries[this.recordSeries.length-1].date,t=new Date;return t.setUTCHours(12,0,0,0),(t-e)/864e5}},{key:"getCasesStartingNDaysAgoDuringMDays",value:function(e,t){var a=new Date(Date.now()-1e3*e*3600*24);a.setUTCHours(0,0,1,0);for(var n=new Date(a.getTime()+1e3*t*3600*24),r=0,s=this.recordSeries.length-1;s>=0;s--){var l=this.recordSeries[s];l.date>a&&l.date<n&&(r+=l.cases)}return r}},{key:"getDeathsStartingNDaysAgoDuringMDays",value:function(e,t){var a=new Date(Date.now()-1e3*e*3600*24);a.setUTCHours(0,0,1,0);for(var n=new Date(a.getTime()+1e3*t*3600*24),r=0,s=this.recordSeries.length-1;s>=0;s--){var l=this.recordSeries[s];l.date>a&&l.date<n&&(r+=l.deaths)}return r}},{key:"getCasesSeries",value:function(){for(var e={},t=0;t<this.recordSeries.length;t++){var a=this.recordSeries[t],n=a.date.getUTCFullYear(),r=a.date.getUTCMonth()+1;r=r<10?"0".concat(r):r;var s=a.date.getUTCDate();s=s<10?"0".concat(s):s,e["".concat(n,"-").concat(r,"-").concat(s)]=a.cases}return e}},{key:"getCasesSeriesPerMillion",value:function(){for(var e={},t=0;t<this.recordSeries.length;t++){var a=this.recordSeries[t],n=a.date.getUTCFullYear(),r=a.date.getUTCMonth()+1;r=r<10?"0".concat(r):r;var s=a.date.getUTCDate();s=s<10?"0".concat(s):s,e["".concat(n,"-").concat(r,"-").concat(s)]=a.cases/(this.population/1e6)}return e}},{key:"getCumulatedCasesSeries",value:function(){for(var e={},t=0,a=0;a<this.recordSeries.length;a++){var n=this.recordSeries[a];t+=n.cases;var r=n.date.getUTCFullYear(),s=n.date.getUTCMonth()+1;s=s<10?"0".concat(s):s;var l=n.date.getUTCDate();l=l<10?"0".concat(l):l,e["".concat(r,"-").concat(s,"-").concat(l)]=t}return e}},{key:"getCumulatedCasesSeriesPerMillion",value:function(){for(var e={},t=0,a=0;a<this.recordSeries.length;a++){var n=this.recordSeries[a];t+=n.cases;var r=n.date.getUTCFullYear(),s=n.date.getUTCMonth()+1;s=s<10?"0".concat(s):s;var l=n.date.getUTCDate();l=l<10?"0".concat(l):l,e["".concat(r,"-").concat(s,"-").concat(l)]=t/(this.population/1e6)}return e}},{key:"getDeathsSeries",value:function(){for(var e={},t=0;t<this.recordSeries.length;t++){var a=this.recordSeries[t],n=a.date.getUTCFullYear(),r=a.date.getUTCMonth()+1;r=r<10?"0".concat(r):r;var s=a.date.getUTCDate();s=s<10?"0".concat(s):s,e["".concat(n,"-").concat(r,"-").concat(s)]=a.deaths}return e}},{key:"getDeathsSeriesPerMillion",value:function(){for(var e={},t=0;t<this.recordSeries.length;t++){var a=this.recordSeries[t],n=a.date.getUTCFullYear(),r=a.date.getUTCMonth()+1;r=r<10?"0".concat(r):r;var s=a.date.getUTCDate();s=s<10?"0".concat(s):s,e["".concat(n,"-").concat(r,"-").concat(s)]=a.deaths/(this.population/1e6)}return e}},{key:"getCumulatedDeathsSeries",value:function(){for(var e={},t=0,a=0;a<this.recordSeries.length;a++){var n=this.recordSeries[a];t+=n.deaths;var r=n.date.getUTCFullYear(),s=n.date.getUTCMonth()+1;s=s<10?"0".concat(s):s;var l=n.date.getUTCDate();l=l<10?"0".concat(l):l,e["".concat(r,"-").concat(s,"-").concat(l)]=t}return e}},{key:"getCumulatedDeathsSeriesPerMillion",value:function(){for(var e={},t=0,a=0;a<this.recordSeries.length;a++){var n=this.recordSeries[a];t+=n.deaths;var r=n.date.getUTCFullYear(),s=n.date.getUTCMonth()+1;s=s<10?"0".concat(s):s;var l=n.date.getUTCDate();l=l<10?"0".concat(l):l,e["".concat(r,"-").concat(s,"-").concat(l)]=t/(this.population/1e6)}return e}}]),e}(),h=new(function(){function e(){Object(u.a)(this,e),this.collection={}}return Object(d.a)(e,[{key:"addCountry",value:function(e){this.collection[e.code]=e}},{key:"getCountry",value:function(e){return e in this.collection?this.collection[e]:null}},{key:"hasCountry",value:function(e){return e.toLowerCase()in this.collection}},{key:"getAllCountries",value:function(){return Object.values(this.collection).sort((function(e,t){return e.name<t.name?-1:1}))}}]),e}()),g={defaultCountryCode:"world"};function p(){return(p=Object(s.a)(r.a.mark((function e(){var t,a,n,s,l,c,o,i,u,d,g,p,b,v,f,y,C,E,D,N;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./data/country-by-abbreviation.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.next=8,fetch("./data/country-by-population.json");case 8:return n=e.sent,e.next=11,n.json();case 11:return s=e.sent,l={},s.forEach((function(e){l[e.country.toLowerCase()]=parseInt(e.population)||null})),e.next=16,fetch("./data/mortality-rate-per-country-2017.json");case 16:return c=e.sent,e.next=19,c.json();case 19:return o=e.sent,i=new Date,u=(u=i.getUTCDate())<10?"0".concat(u):"".concat(u),d=(d=i.getUTCMonth()+1)<10?"0".concat(d):"".concat(d),g="".concat(i.getUTCFullYear()),p=null,b=null,e.prev=28,e.prev=29,e.next=32,fetch("./data/covid19-per-country-".concat(u,"-").concat(d,"-").concat(g,".json"));case 32:return p=e.sent,e.next=35,p.json();case 35:b=e.sent,e.next=46;break;case 38:return e.prev=38,e.t0=e.catch(29),e.next=42,fetch("https://raw.githubusercontent.com/jonathanlurie/covid19dashboard/master/docs/data/covid19-per-country-".concat(u,"-").concat(d,"-").concat(g,".json"));case 42:return p=e.sent,e.next=45,p.json();case 45:b=e.sent;case 46:e.next=74;break;case 48:return e.prev=48,e.t1=e.catch(28),console.log("Fallback on the last report available"),e.next=53,fetch("./data/config.json");case 53:return v=e.sent,e.next=56,v.json();case 56:return f=e.sent,e.prev=57,e.next=60,fetch("./data/".concat(f.lastFile));case 60:return p=e.sent,e.next=63,p.json();case 63:b=e.sent,e.next=74;break;case 66:return e.prev=66,e.t2=e.catch(57),e.next=70,fetch("https://raw.githubusercontent.com/jonathanlurie/covid19dashboard/master/docs/data/".concat(f.lastFile));case 70:return p=e.sent,e.next=73,p.json();case 73:b=e.sent;case 74:for(console.log("covid19",b),y=0;y<a.length;y++)C=a[y].country.toLowerCase(),E=a[y].abbreviation.toLowerCase(),D=l[C],(N=new m(E,C)).population=D,E.toUpperCase()in b&&N.setRecordSeries(b[E.toUpperCase()]),E.toLowerCase()in o&&(N.mortalityRate=o[E.toLowerCase()]),h.addCountry(N);console.log("countryCollection",h);case 77:case"end":return e.stop()}}),e,null,[[28,48],[29,38],[57,66]])})))).apply(this,arguments)}var b=function(){return p.apply(this,arguments)},v=(a(70),a(22)),f=a(10),y=a(17),C=a(16),E=a(18),D=(a(13),a(15)),N=(a(165),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(y.a)(this,Object(C.a)(t).call(this,e))).state={},a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.countryCode,t=h.getCountry(e);console.log(t);var a=t.getCasesSeries(),n=t.getCumulatedCasesSeries(),r=t.getDeathsSeries(),s=t.getCumulatedDeathsSeries(),l=t.getCasesSeriesPerMillion(),o=t.getCumulatedCasesSeriesPerMillion(),i=t.getDeathsSeriesPerMillion(),u=t.getCumulatedDeathsSeriesPerMillion(),d=null,m=0;0===Object.keys(a).length?d=c.a.createElement("div",{className:"warning-message"},"\u26a0\ufe0f There is no record for this country"):(m=t.getDataAge(),console.log("dataAge",m),d=m<.5?c.a.createElement("div",{className:"info-message"},"\u2705 These numbers are fresh from the day"):m>=.5&&m<=1?c.a.createElement("div",{className:"warning-message"},"\u26a0\ufe0f These numbers are from yesterday, they may not reflect today's reality"):c.a.createElement("div",{className:"warning-message"},"\u26a0\ufe0f These numbers are from ",~~m," days ago, they may not reflect todays reality"));var g={labels:Object.keys(a),datasets:[{label:"COVID-19 cases",data:Object.values(a),fill:!1,pointRadius:1.7,pointHitRadius:10,borderColor:"rgba(255, 200, 0, 1)",lineTension:.2,backgroundColor:"rgba(255, 200, 0, 1)"},{label:"COVID-19 deaths",data:Object.values(r),fill:!1,pointRadius:1.7,pointHitRadius:10,borderColor:"rgba(200, 0, 0, 1)",lineTension:.2,backgroundColor:"rgba(200, 0, 0, 1)"}]},p={labels:Object.keys(a),datasets:[{label:"COVID-19 cumulated cases",data:Object.values(n),fill:!1,pointRadius:1.7,pointHitRadius:10,borderColor:"rgba(255, 200, 0, 1)",lineTension:.2,backgroundColor:"rgba(255, 200, 0, 1)"},{label:"COVID-19 deaths",data:Object.values(s),fill:!1,pointRadius:1.7,pointHitRadius:10,borderColor:"rgba(200, 0, 0, 1)",lineTension:.2,backgroundColor:"rgba(200, 0, 0, 1)"}]},b={labels:Object.keys(a),datasets:[{label:"COVID-19 cases per million",data:Object.values(l),fill:!1,pointRadius:1.7,pointHitRadius:10,borderColor:"rgba(255, 200, 0, 1)",lineTension:.2,backgroundColor:"rgba(255, 200, 0, 1)"},{label:"COVID-19 deaths per million",data:Object.values(i),fill:!1,pointRadius:1.7,pointHitRadius:10,borderColor:"rgba(200, 0, 0, 1)",lineTension:.2,backgroundColor:"rgba(200, 0, 0, 1)"}]},v={labels:Object.keys(a),datasets:[{label:"COVID-19 cumulated cases",data:Object.values(o),fill:!1,pointRadius:1.7,pointHitRadius:10,borderColor:"rgba(255, 200, 0, 1)",lineTension:.2,backgroundColor:"rgba(255, 200, 0, 1)"},{label:"COVID-19 deaths",data:Object.values(u),fill:!1,pointRadius:1.7,pointHitRadius:10,borderColor:"rgba(200, 0, 0, 1)",lineTension:.2,backgroundColor:"rgba(200, 0, 0, 1)"}]},f={scales:{yAxes:[{type:"logarithmic"}]}},y=m<.5?0:Math.ceil(m),C=t.getCasesStartingNDaysAgoDuringMDays(2+y,3),E=C>t.getCasesStartingNDaysAgoDuringMDays(5+y,3)?c.a.createElement("img",{className:"evolution-arrow",src:"images/arrow-red-up.png",title:"Higher than the 3 previous days"}):c.a.createElement("img",{className:"evolution-arrow",src:"images/arrow-green-down.png",title:"Lower than the previous 3 days"}),N=t.getDeathsStartingNDaysAgoDuringMDays(2+y,3),S=N>t.getDeathsStartingNDaysAgoDuringMDays(5+y,3)?c.a.createElement("img",{className:"evolution-arrow",src:"images/arrow-red-up.png",title:"Higher than the 3 previous days"}):c.a.createElement("img",{className:"evolution-arrow",src:"images/arrow-green-down.png",title:"Lower than the previous 3 days"}),w=t.getCrudeDeathsPerDay(),j=null;w&&(j=c.a.createElement("div",{className:"crude-deaths-info"},"\u2139\ufe0f For comparison, in 2017, ",c.a.createElement("span",{style:{textTransform:"capitalize",fontWeight:800}},t.name)," was counting an average of ",c.a.createElement("span",{style:{fontWeight:800}},w)," deaths per day ",c.a.createElement("a",{style:{color:"#67abf3",textDecoration:"none"},href:"https://www.cia.gov/library/publications/the-world-factbook/rankorder/2066rank.html"},"[source]")));var k=h.getCountry("world"),O=t.getCasesStartingNDaysAgoDuringMDays(y,1),T=t.getDeathsStartingNDaysAgoDuringMDays(y,1),M=k.getCasesStartingNDaysAgoDuringMDays(y,1),U=k.getDeathsStartingNDaysAgoDuringMDays(y,1),x={labels:[t.name,"World"],datasets:[{data:[~~(O/M*1e3)/1e3,1-~~(O/M*1e3)/1e3],backgroundColor:["#ffc800","#f0f0f0"],hoverBackgroundColor:["#edba00","#dbdbdb"],borderWidth:0}]},R={labels:[t.name,"World"],datasets:[{data:[~~(T/U*1e3)/1e3,1-~~(T/U*1e3)/1e3],backgroundColor:["#c80000","#f0f0f0"],hoverBackgroundColor:["#a30202","#f0f0f0"],borderWidth:0}]};return c.a.createElement("div",{className:"dashboard"},c.a.createElement("div",{className:"country-name"},c.a.createElement("img",{className:"flag",src:"images/flags/".concat(e,".svg")}),c.a.createElement("h1",null,t.name)),d,c.a.createElement("div",{className:"info-grid"},c.a.createElement("div",{className:"cell"},c.a.createElement("div",{className:"cell-inner",style:{float:"right"}},c.a.createElement("p",null,c.a.createElement("span",{className:"cell-title",style:{color:"#ffc800"}},"# cases")),c.a.createElement("p",{className:"cell-section"},c.a.createElement("span",{className:"cell-subtitle"},"(all time)"),c.a.createElement("br",null),c.a.createElement("span",{className:"cell-score"},t.getCases())),c.a.createElement("p",{className:"cell-section"},c.a.createElement("span",{className:"cell-subtitle"},"(all time per million)"),c.a.createElement("br",null),c.a.createElement("span",{className:"cell-score"},~~(100*t.getCasesPerMillion())/100)),c.a.createElement("p",{className:"cell-section"},c.a.createElement("span",{className:"cell-subtitle"},"(in the last day)"),c.a.createElement("br",null),c.a.createElement("span",{className:"cell-score"},O)),c.a.createElement("p",{className:"cell-section"},c.a.createElement("span",{className:"cell-subtitle"},"(in the last 3 days)"),c.a.createElement("br",null),c.a.createElement("span",{className:"cell-score"},C),E),c.a.createElement("p",{className:"cell-section"},c.a.createElement("span",{className:"cell-subtitle"},"(world proportion in last day)"),c.a.createElement("br",null),c.a.createElement(D.b,{data:x})))),c.a.createElement("div",{className:"cell"},c.a.createElement("div",{className:"cell-inner",style:{float:"left"}},c.a.createElement("p",null,c.a.createElement("span",{className:"cell-title",style:{color:"#c80000"}},"# deaths")),c.a.createElement("p",{className:"cell-section"},c.a.createElement("span",{className:"cell-subtitle"},"(all time)"),c.a.createElement("br",null),c.a.createElement("span",{className:"cell-score"},t.getDeaths())),c.a.createElement("p",{className:"cell-section"},c.a.createElement("span",{className:"cell-subtitle"},"(all time per million)"),c.a.createElement("br",null),c.a.createElement("span",{className:"cell-score"},~~(100*t.getDeathsPerMillion())/100)),c.a.createElement("p",{className:"cell-section"},c.a.createElement("span",{className:"cell-subtitle"},"(in the last day)"),c.a.createElement("br",null),c.a.createElement("span",{className:"cell-score"},T)),c.a.createElement("p",{className:"cell-section"},c.a.createElement("span",{className:"cell-subtitle"},"(in the last 3 days)"),c.a.createElement("br",null),c.a.createElement("span",{className:"cell-score"},N),S),c.a.createElement("p",{className:"cell-section"},c.a.createElement("span",{className:"cell-subtitle"},"(world proportion in last day)"),c.a.createElement("br",null),c.a.createElement(D.b,{data:R}))))),j,c.a.createElement("div",{className:"plot-title"},"COVID-19 cases and deaths over time (linear scale)"),c.a.createElement(D.a,{data:g,options:{},height:100}),c.a.createElement("div",{className:"plot-title"},"COVID-19 cumulated cases and deaths over time (logarithmic scale)"),c.a.createElement(D.a,{data:p,options:f,height:100}),c.a.createElement("div",{className:"plot-title"},"COVID-19 cases and deaths over time per million population (linear scale)"),c.a.createElement(D.a,{data:b,options:{},height:100}),c.a.createElement("div",{className:"plot-title"},"COVID-19 cumulated cases and deaths over time per milion population (logarithmic scale)"),c.a.createElement(D.a,{data:v,options:f,height:100}),c.a.createElement("div",{className:"credits"},c.a.createElement("p",null,"Data from the ",c.a.createElement("a",{href:"https://www.ecdc.europa.eu/en/publications-data/download-todays-data-geographic-distribution-covid-19-cases-worldwide"},"European Centre for Disease Prevention and Control")),c.a.createElement("p",null,"\u2014 Made by ",c.a.createElement("a",{href:"https://twitter.com/jonathanlurie"},"@jonathanlurie")," :: ",c.a.createElement("a",{href:"https://github.com/jonathanlurie/covid19dashboard"},"fork me on GitHub")," \u2014")))}}]),t}(c.a.Component)),S=(a(166),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(y.a)(this,Object(C.a)(t).call(this,e))).state={countrySearch:""},a.fullCountryList=h.getAllCountries(),a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.fullCountryList;""!==this.state.countrySearch&&(t=t.filter((function(t){return t.name.includes(e.state.countrySearch)})));var a=t.map((function(e){var t="images/flags/".concat(e.code,".svg");return c.a.createElement("li",{key:e.code},c.a.createElement("img",{className:"flag",src:t}),c.a.createElement("span",{className:"country-name"},c.a.createElement(v.b,{to:e.code},e.name)))}));return c.a.createElement("div",{className:"country-list"},c.a.createElement("div",{className:"title"},"COVID-19",c.a.createElement("br",null),"dashboard"),c.a.createElement("div",{className:"container"},c.a.createElement("input",{className:"searchbar",placeholder:"Type a country...",onChange:function(t){e.setState({countrySearch:t.target.value.toLowerCase()})}}),c.a.createElement("ul",null,a)))}}]),t}(c.a.Component)),w=(a(169),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(y.a)(this,Object(C.a)(t).call(this,e))).state={},a}return Object(E.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.match.params.countryCode;return e?(h.hasCountry(e)||alert("There is no data for this country."),c.a.createElement("div",{className:"main"},c.a.createElement(S,null),c.a.createElement(N,{countryCode:e}))):c.a.createElement(f.a,{to:g.defaultCountryCode})}}]),t}(c.a.Component));function j(){return c.a.createElement(v.a,null,c.a.createElement(f.d,null,c.a.createElement(f.b,{path:"/:countryCode",component:w}),c.a.createElement(f.b,{path:"/",component:w})))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function k(){return(k=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("loading data..."),e.next=3,b();case 3:console.log("done loading data"),i.a.render(c.a.createElement(j,null),document.getElementById("root"));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){k.apply(this,arguments)}()},64:function(e,t,a){e.exports=a(170)},70:function(e,t,a){}},[[64,1,2]]]);
//# sourceMappingURL=main.22c395eb.chunk.js.map