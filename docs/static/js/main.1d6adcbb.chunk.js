(this.webpackJsonpcovid19dasboard=this.webpackJsonpcovid19dasboard||[]).push([[0],{165:function(e,t,a){},166:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){"use strict";a.r(t);var n=a(11),r=a.n(n),o=a(22),c=a(0),s=a.n(c),i=a(60),l=a.n(i),u=a(5),d=a(6),h=function(){function e(t,a){Object(u.a)(this,e),this.code=t,this.name=a,this.recordSeries=[],this.population=null}return Object(d.a)(e,[{key:"setRecordSeries",value:function(e){this.recordSeries=e;for(var t=0;t<this.recordSeries.length;t++)this.recordSeries[t].date=new Date(this.recordSeries[t].date)}},{key:"getCases",value:function(){for(var e=0,t=0;t<this.recordSeries.length;t++)e+=this.recordSeries[t].cases;return e}},{key:"getDeaths",value:function(){for(var e=0,t=0;t<this.recordSeries.length;t++)e+=this.recordSeries[t].deaths;return e}},{key:"getCasesPerMillion",value:function(){return this.getCases()/(this.population/1e6)}},{key:"getDeathsPerMillion",value:function(){return this.getDeaths()/(this.population/1e6)}},{key:"getCasesStartingNDaysAgoDuringMDays",value:function(e,t){var a=new Date(Date.now()-1e3*e*3600*24);a.setUTCHours(0,0,1,0);var n=new Date(a.getTime()+1e3*t*3600*24);console.log("nDaysAgo",a.toUTCString()),console.log("mDaysAfter",n.toUTCString());for(var r=0,o=this.recordSeries.length-1;o>=0;o--){var c=this.recordSeries[o];c.date>a&&c.date<n&&(r+=c.cases)}return r}},{key:"getDeathsStartingNDaysAgoDuringMDays",value:function(e,t){var a=new Date(Date.now()-1e3*e*3600*24);a.setUTCHours(0,0,1,0);var n=new Date(a.getTime()+1e3*t*3600*24);console.log("nDaysAgo",a.toUTCString()),console.log("mDaysAfter",n.toUTCString());for(var r=0,o=this.recordSeries.length-1;o>=0;o--){var c=this.recordSeries[o];c.date>a&&c.date<n&&(r+=c.deaths)}return r}},{key:"getCasesSeries",value:function(){for(var e={},t=0;t<this.recordSeries.length;t++){var a=this.recordSeries[t],n=a.date.getUTCFullYear(),r=a.date.getUTCMonth()+1;r=r<10?"0".concat(r):r;var o=a.date.getUTCDate();o=o<10?"0".concat(o):o,e["".concat(n,"-").concat(r,"-").concat(o)]=a.cases}return e}},{key:"getCasesSeriesPerMillion",value:function(){for(var e={},t=0;t<this.recordSeries.length;t++){var a=this.recordSeries[t],n=a.date.getUTCFullYear(),r=a.date.getUTCMonth()+1;r=r<10?"0".concat(r):r;var o=a.date.getUTCDate();o=o<10?"0".concat(o):o,e["".concat(n,"-").concat(r,"-").concat(o)]=a.cases/(this.population/1e6)}return e}},{key:"getCumulatedCasesSeries",value:function(){for(var e={},t=0,a=0;a<this.recordSeries.length;a++){var n=this.recordSeries[a];t+=n.cases;var r=n.date.getUTCFullYear(),o=n.date.getUTCMonth()+1;o=o<10?"0".concat(o):o;var c=n.date.getUTCDate();c=c<10?"0".concat(c):c,e["".concat(r,"-").concat(o,"-").concat(c)]=t}return e}},{key:"getCumulatedCasesSeriesPerMillion",value:function(){for(var e={},t=0,a=0;a<this.recordSeries.length;a++){var n=this.recordSeries[a];t+=n.cases;var r=n.date.getUTCFullYear(),o=n.date.getUTCMonth()+1;o=o<10?"0".concat(o):o;var c=n.date.getUTCDate();c=c<10?"0".concat(c):c,e["".concat(r,"-").concat(o,"-").concat(c)]=t/(this.population/1e6)}return e}},{key:"getDeathsSeries",value:function(){for(var e={},t=0;t<this.recordSeries.length;t++){var a=this.recordSeries[t],n=a.date.getUTCFullYear(),r=a.date.getUTCMonth()+1;r=r<10?"0".concat(r):r;var o=a.date.getUTCDate();o=o<10?"0".concat(o):o,e["".concat(n,"-").concat(r,"-").concat(o)]=a.deaths}return e}},{key:"getDeathsSeriesPerMillion",value:function(){for(var e={},t=0;t<this.recordSeries.length;t++){var a=this.recordSeries[t],n=a.date.getUTCFullYear(),r=a.date.getUTCMonth()+1;r=r<10?"0".concat(r):r;var o=a.date.getUTCDate();o=o<10?"0".concat(o):o,e["".concat(n,"-").concat(r,"-").concat(o)]=a.deaths/(this.population/1e6)}return e}},{key:"getCumulatedDeathsSeries",value:function(){for(var e={},t=0,a=0;a<this.recordSeries.length;a++){var n=this.recordSeries[a];t+=n.deaths;var r=n.date.getUTCFullYear(),o=n.date.getUTCMonth()+1;o=o<10?"0".concat(o):o;var c=n.date.getUTCDate();c=c<10?"0".concat(c):c,e["".concat(r,"-").concat(o,"-").concat(c)]=t}return e}},{key:"getCumulatedDeathsSeriesPerMillion",value:function(){for(var e={},t=0,a=0;a<this.recordSeries.length;a++){var n=this.recordSeries[a];t+=n.deaths;var r=n.date.getUTCFullYear(),o=n.date.getUTCMonth()+1;o=o<10?"0".concat(o):o;var c=n.date.getUTCDate();c=c<10?"0".concat(c):c,e["".concat(r,"-").concat(o,"-").concat(c)]=t/(this.population/1e6)}return e}}]),e}(),g=new(function(){function e(){Object(u.a)(this,e),this.collection={}}return Object(d.a)(e,[{key:"addCountry",value:function(e){this.collection[e.code]=e}},{key:"getCountry",value:function(e){return e in this.collection?this.collection[e]:null}},{key:"hasCountry",value:function(e){return e.toLowerCase()in this.collection}},{key:"getAllCountries",value:function(){return Object.values(this.collection).sort((function(e,t){return e.name<t.name?-1:1}))}}]),e}()),p={defaultCountryCode:"ch"};function v(){return C.apply(this,arguments)}function C(){return(C=Object(o.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://www.geoplugin.net/json.gp");case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,p.defaultCountryCode=a.geoplugin_countryCode.toLowerCase(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function m(){return(m=Object(o.a)(r.a.mark((function e(){var t,a,n,o,c,s,i,l,u,d,p,C,m,f,b,y,S,D;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return e.next=4,fetch("./data/country-by-abbreviation.json");case 4:return t=e.sent,e.next=7,t.json();case 7:return a=e.sent,e.next=10,fetch("./data/country-by-population.json");case 10:return n=e.sent,e.next=13,n.json();case 13:return o=e.sent,c={},o.forEach((function(e){c[e.country.toLowerCase()]=parseInt(e.population)||null})),s=new Date,i=(i=s.getUTCDate())<10?"0".concat(i):"".concat(i),l=(l=s.getUTCMonth()+1)<10?"0".concat(l):"".concat(l),u="".concat(s.getUTCFullYear()),d=null,p=null,e.prev=24,e.next=27,fetch("./data/covid19-per-country-".concat(i,"-").concat(l,"-").concat(u,".json"));case 27:return d=e.sent,e.next=30,d.json();case 30:p=e.sent,e.next=48;break;case 33:return e.prev=33,e.t0=e.catch(24),console.log("Fallback on the last report available"),e.next=38,fetch("./data/config.json");case 38:return C=e.sent,e.next=41,C.json();case 41:return m=e.sent,e.next=44,fetch("./data/".concat(m.lastFile));case 44:return d=e.sent,e.next=47,d.json();case 47:p=e.sent;case 48:for(f=0;f<a.length;f++)b=a[f].country.toLowerCase(),y=a[f].abbreviation.toLowerCase(),S=c[b],(D=new h(y,b)).population=S,y.toUpperCase()in p&&D.setRecordSeries(p[y.toUpperCase()]),g.addCountry(D);case 49:case"end":return e.stop()}}),e,null,[[24,33]])})))).apply(this,arguments)}var f=function(){return m.apply(this,arguments)},b=(a(70),a(21)),y=a(10),S=a(16),D=a(15),j=a(17),O=(a(13),a(23)),T=(a(165),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(S.a)(this,Object(D.a)(t).call(this,e))).state={},a}return Object(j.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.countryCode,t=g.getCountry(e),a=t.getCasesSeries(),n=t.getCumulatedCasesSeries(),r=t.getDeathsSeries(),o=t.getCumulatedDeathsSeries(),c=t.getCasesSeriesPerMillion(),i=t.getCumulatedCasesSeriesPerMillion(),l=t.getDeathsSeriesPerMillion(),u=t.getCumulatedDeathsSeriesPerMillion(),d={labels:Object.keys(a),datasets:[{label:"COVID-19 cases",data:Object.values(a),fill:!1,pointRadius:1.7,pointHitRadius:10,borderColor:"rgba(255, 200, 0, 1)",lineTension:.2,backgroundColor:"rgba(255, 200, 0, 1)"},{label:"COVID-19 deaths",data:Object.values(r),fill:!1,pointRadius:1.7,pointHitRadius:10,borderColor:"rgba(200, 0, 0, 1)",lineTension:.2,backgroundColor:"rgba(200, 0, 0, 1)"}]},h={labels:Object.keys(a),datasets:[{label:"COVID-19 cumulated cases",data:Object.values(n),fill:!1,pointRadius:1.7,pointHitRadius:10,borderColor:"rgba(255, 200, 0, 1)",lineTension:.2,backgroundColor:"rgba(255, 200, 0, 1)"},{label:"COVID-19 deaths",data:Object.values(o),fill:!1,pointRadius:1.7,pointHitRadius:10,borderColor:"rgba(200, 0, 0, 1)",lineTension:.2,backgroundColor:"rgba(200, 0, 0, 1)"}]},p={labels:Object.keys(a),datasets:[{label:"COVID-19 cases per million",data:Object.values(c),fill:!1,pointRadius:1.7,pointHitRadius:10,borderColor:"rgba(255, 200, 0, 1)",lineTension:.2,backgroundColor:"rgba(255, 200, 0, 1)"},{label:"COVID-19 deaths per million",data:Object.values(l),fill:!1,pointRadius:1.7,pointHitRadius:10,borderColor:"rgba(200, 0, 0, 1)",lineTension:.2,backgroundColor:"rgba(200, 0, 0, 1)"}]},v={labels:Object.keys(a),datasets:[{label:"COVID-19 cumulated cases",data:Object.values(i),fill:!1,pointRadius:1.7,pointHitRadius:10,borderColor:"rgba(255, 200, 0, 1)",lineTension:.2,backgroundColor:"rgba(255, 200, 0, 1)"},{label:"COVID-19 deaths",data:Object.values(u),fill:!1,pointRadius:1.7,pointHitRadius:10,borderColor:"rgba(200, 0, 0, 1)",lineTension:.2,backgroundColor:"rgba(200, 0, 0, 1)"}]},C={scales:{yAxes:[{type:"logarithmic"}]}};return s.a.createElement("div",{className:"dashboard"},s.a.createElement("div",{className:"country-name"},s.a.createElement("img",{className:"flag",src:"images/flags/".concat(e,".svg")}),s.a.createElement("h1",null,t.name)),s.a.createElement("div",{className:"plot-title"},"COVID-19 cases and deaths over time (linear scale)"),s.a.createElement(O.a,{data:d,options:{},height:100}),s.a.createElement("div",{className:"plot-title"},"COVID-19 cumulated cases and deaths over time (logarithmic scale)"),s.a.createElement(O.a,{data:h,options:C,height:100}),s.a.createElement("div",{className:"plot-title"},"COVID-19 cases and deaths over time per million population (linear scale)"),s.a.createElement(O.a,{data:p,options:{},height:100}),s.a.createElement("div",{className:"plot-title"},"COVID-19 cumulated cases and deaths over time per milion poplation (logarithmic scale)"),s.a.createElement(O.a,{data:v,options:C,height:100}),s.a.createElement("div",{className:"credits"},s.a.createElement("p",null,"Data from the ",s.a.createElement("a",{href:"https://www.ecdc.europa.eu/en/publications-data/download-todays-data-geographic-distribution-covid-19-cases-worldwide"},"European Centre for Disease Prevention and Control")),s.a.createElement("p",null,"\u2014 Made by ",s.a.createElement("a",{href:"https://twitter.com/jonathanlurie"},"@jonathanlurie")," :: ",s.a.createElement("a",{href:"https://github.com/jonathanlurie/covid19dashboard"},"fork me on GitHub")," \u2014")))}}]),t}(s.a.Component)),k=(a(166),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(S.a)(this,Object(D.a)(t).call(this,e))).state={countrySearch:""},a.fullCountryList=g.getAllCountries(),a}return Object(j.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.fullCountryList;""!==this.state.countrySearch&&(t=t.filter((function(t){return t.name.includes(e.state.countrySearch)})));var a=t.map((function(e){var t="images/flags/".concat(e.code,".svg");return s.a.createElement("li",{key:e.code},s.a.createElement("img",{className:"flag",src:t}),s.a.createElement("span",{className:"country-name"},s.a.createElement(b.b,{to:e.code},e.name)))}));return s.a.createElement("div",{className:"country-list"},s.a.createElement("div",{className:"title"},"COVID-19",s.a.createElement("br",null),"dashboard"),s.a.createElement("div",{className:"container"},s.a.createElement("input",{className:"searchbar",placeholder:"Type a country...",onChange:function(t){e.setState({countrySearch:t.target.value})}}),s.a.createElement("ul",null,a)))}}]),t}(s.a.Component)),E=(a(169),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(S.a)(this,Object(D.a)(t).call(this,e))).state={},a}return Object(j.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.match.params.countryCode;return e?(g.hasCountry(e)||alert("There is no data for this country."),s.a.createElement("div",{className:"main"},s.a.createElement(k,null),s.a.createElement(T,{countryCode:e}))):s.a.createElement(y.a,{to:p.defaultCountryCode})}}]),t}(s.a.Component));function w(){return s.a.createElement(b.a,null,s.a.createElement(y.d,null,s.a.createElement(y.b,{path:"/:countryCode",component:E}),s.a.createElement(y.b,{path:"/",component:E})))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function U(){return(U=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("loading data..."),e.next=3,f();case 3:console.log("done loading data"),l.a.render(s.a.createElement(w,null),document.getElementById("root"));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){U.apply(this,arguments)}()},64:function(e,t,a){e.exports=a(170)},70:function(e,t,a){}},[[64,1,2]]]);
//# sourceMappingURL=main.1d6adcbb.chunk.js.map