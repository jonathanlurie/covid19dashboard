(this.webpackJsonpcovid19dasboard=this.webpackJsonpcovid19dasboard||[]).push([[0],{165:function(e,t,a){},166:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){"use strict";a.r(t);var n=a(11),r=a.n(n),s=a(22),l=a(0),c=a.n(l),o=a(60),i=a.n(o),u=a(5),d=a(6),m=function(){function e(t,a){Object(u.a)(this,e),this.code=t,this.name=a,this.recordSeries=[],this.population=null}return Object(d.a)(e,[{key:"setRecordSeries",value:function(e){this.recordSeries=e;for(var t=0;t<this.recordSeries.length;t++)this.recordSeries[t].date=new Date(this.recordSeries[t].date)}},{key:"getCases",value:function(){for(var e=0,t=0;t<this.recordSeries.length;t++)e+=this.recordSeries[t].cases;return e}},{key:"getDeaths",value:function(){for(var e=0,t=0;t<this.recordSeries.length;t++)e+=this.recordSeries[t].deaths;return e}},{key:"getCasesPerMillion",value:function(){return this.getCases()/(this.population/1e6)}},{key:"getDeathsPerMillion",value:function(){return this.getDeaths()/(this.population/1e6)}},{key:"getDataAge",value:function(){var e=this.recordSeries[this.recordSeries.length-1].date,t=new Date;return t.setUTCHours(12,0,0,0),(t-e)/864e5}},{key:"getCasesStartingNDaysAgoDuringMDays",value:function(e,t){var a=new Date(Date.now()-1e3*e*3600*24);a.setUTCHours(0,0,1,0);for(var n=new Date(a.getTime()+1e3*t*3600*24),r=0,s=this.recordSeries.length-1;s>=0;s--){var l=this.recordSeries[s];l.date>a&&l.date<n&&(r+=l.cases)}return r}},{key:"getDeathsStartingNDaysAgoDuringMDays",value:function(e,t){var a=new Date(Date.now()-1e3*e*3600*24);a.setUTCHours(0,0,1,0);for(var n=new Date(a.getTime()+1e3*t*3600*24),r=0,s=this.recordSeries.length-1;s>=0;s--){var l=this.recordSeries[s];l.date>a&&l.date<n&&(r+=l.deaths)}return r}},{key:"getCasesSeries",value:function(){for(var e={},t=0;t<this.recordSeries.length;t++){var a=this.recordSeries[t],n=a.date.getUTCFullYear(),r=a.date.getUTCMonth()+1;r=r<10?"0".concat(r):r;var s=a.date.getUTCDate();s=s<10?"0".concat(s):s,e["".concat(n,"-").concat(r,"-").concat(s)]=a.cases}return e}},{key:"getCasesSeriesPerMillion",value:function(){for(var e={},t=0;t<this.recordSeries.length;t++){var a=this.recordSeries[t],n=a.date.getUTCFullYear(),r=a.date.getUTCMonth()+1;r=r<10?"0".concat(r):r;var s=a.date.getUTCDate();s=s<10?"0".concat(s):s,e["".concat(n,"-").concat(r,"-").concat(s)]=a.cases/(this.population/1e6)}return e}},{key:"getCumulatedCasesSeries",value:function(){for(var e={},t=0,a=0;a<this.recordSeries.length;a++){var n=this.recordSeries[a];t+=n.cases;var r=n.date.getUTCFullYear(),s=n.date.getUTCMonth()+1;s=s<10?"0".concat(s):s;var l=n.date.getUTCDate();l=l<10?"0".concat(l):l,e["".concat(r,"-").concat(s,"-").concat(l)]=t}return e}},{key:"getCumulatedCasesSeriesPerMillion",value:function(){for(var e={},t=0,a=0;a<this.recordSeries.length;a++){var n=this.recordSeries[a];t+=n.cases;var r=n.date.getUTCFullYear(),s=n.date.getUTCMonth()+1;s=s<10?"0".concat(s):s;var l=n.date.getUTCDate();l=l<10?"0".concat(l):l,e["".concat(r,"-").concat(s,"-").concat(l)]=t/(this.population/1e6)}return e}},{key:"getDeathsSeries",value:function(){for(var e={},t=0;t<this.recordSeries.length;t++){var a=this.recordSeries[t],n=a.date.getUTCFullYear(),r=a.date.getUTCMonth()+1;r=r<10?"0".concat(r):r;var s=a.date.getUTCDate();s=s<10?"0".concat(s):s,e["".concat(n,"-").concat(r,"-").concat(s)]=a.deaths}return e}},{key:"getDeathsSeriesPerMillion",value:function(){for(var e={},t=0;t<this.recordSeries.length;t++){var a=this.recordSeries[t],n=a.date.getUTCFullYear(),r=a.date.getUTCMonth()+1;r=r<10?"0".concat(r):r;var s=a.date.getUTCDate();s=s<10?"0".concat(s):s,e["".concat(n,"-").concat(r,"-").concat(s)]=a.deaths/(this.population/1e6)}return e}},{key:"getCumulatedDeathsSeries",value:function(){for(var e={},t=0,a=0;a<this.recordSeries.length;a++){var n=this.recordSeries[a];t+=n.deaths;var r=n.date.getUTCFullYear(),s=n.date.getUTCMonth()+1;s=s<10?"0".concat(s):s;var l=n.date.getUTCDate();l=l<10?"0".concat(l):l,e["".concat(r,"-").concat(s,"-").concat(l)]=t}return e}},{key:"getCumulatedDeathsSeriesPerMillion",value:function(){for(var e={},t=0,a=0;a<this.recordSeries.length;a++){var n=this.recordSeries[a];t+=n.deaths;var r=n.date.getUTCFullYear(),s=n.date.getUTCMonth()+1;s=s<10?"0".concat(s):s;var l=n.date.getUTCDate();l=l<10?"0".concat(l):l,e["".concat(r,"-").concat(s,"-").concat(l)]=t/(this.population/1e6)}return e}}]),e}(),h=new(function(){function e(){Object(u.a)(this,e),this.collection={}}return Object(d.a)(e,[{key:"addCountry",value:function(e){this.collection[e.code]=e}},{key:"getCountry",value:function(e){return e in this.collection?this.collection[e]:null}},{key:"hasCountry",value:function(e){return e.toLowerCase()in this.collection}},{key:"getAllCountries",value:function(){return Object.values(this.collection).sort((function(e,t){return e.name<t.name?-1:1}))}}]),e}()),g={defaultCountryCode:"ch"};function p(){return v.apply(this,arguments)}function v(){return(v=Object(s.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://www.geoplugin.net/json.gp");case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,g.defaultCountryCode=a.geoplugin_countryCode.toLowerCase(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function b(){return(b=Object(s.a)(r.a.mark((function e(){var t,a,n,s,l,c,o,i,u,d,g,v,b,f,C,y,E,D;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p();case 2:return e.next=4,fetch("./data/country-by-abbreviation.json");case 4:return t=e.sent,e.next=7,t.json();case 7:return a=e.sent,e.next=10,fetch("./data/country-by-population.json");case 10:return n=e.sent,e.next=13,n.json();case 13:return s=e.sent,l={},s.forEach((function(e){l[e.country.toLowerCase()]=parseInt(e.population)||null})),c=new Date,o=(o=c.getUTCDate())<10?"0".concat(o):"".concat(o),i=(i=c.getUTCMonth()+1)<10?"0".concat(i):"".concat(i),u="".concat(c.getUTCFullYear()),d=null,g=null,e.prev=24,e.next=27,fetch("./data/covid19-per-country-".concat(o,"-").concat(i,"-").concat(u,".json"));case 27:return d=e.sent,e.next=30,d.json();case 30:g=e.sent,e.next=48;break;case 33:return e.prev=33,e.t0=e.catch(24),console.log("Fallback on the last report available"),e.next=38,fetch("./data/config.json");case 38:return v=e.sent,e.next=41,v.json();case 41:return b=e.sent,e.next=44,fetch("./data/".concat(b.lastFile));case 44:return d=e.sent,e.next=47,d.json();case 47:g=e.sent;case 48:for(f=0;f<a.length;f++)C=a[f].country.toLowerCase(),y=a[f].abbreviation.toLowerCase(),E=l[C],(D=new m(y,C)).population=E,y.toUpperCase()in g&&D.setRecordSeries(g[y.toUpperCase()]),h.addCountry(D);case 49:case"end":return e.stop()}}),e,null,[[24,33]])})))).apply(this,arguments)}var f=function(){return b.apply(this,arguments)},C=(a(70),a(21)),y=a(10),E=a(16),D=a(15),N=a(17),S=(a(13),a(23)),w=(a(165),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(E.a)(this,Object(D.a)(t).call(this,e))).state={},a}return Object(N.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.countryCode,t=h.getCountry(e),a=t.getCasesSeries(),n=t.getCumulatedCasesSeries(),r=t.getDeathsSeries(),s=t.getCumulatedDeathsSeries(),l=t.getCasesSeriesPerMillion(),o=t.getCumulatedCasesSeriesPerMillion(),i=t.getDeathsSeriesPerMillion(),u=t.getCumulatedDeathsSeriesPerMillion(),d=null;if(0===Object.keys(a).length)d=c.a.createElement("div",{className:"warning-message"},"\u26a0\ufe0f There is no record for this country");else{var m=t.getDataAge();console.log("dataAge",m),d=m<.5?c.a.createElement("div",{className:"info-message"},"\u2705 These numbers are fresh from the day"):m>=.5&&m<=1?c.a.createElement("div",{className:"warning-message"},"\u26a0\ufe0f These numbers are from yesterday, they may not reflect today's reality"):c.a.createElement("div",{className:"warning-message"},"\u26a0\ufe0f These numbers are from ",~~m," days ago, they may not reflect todays reality")}var g={labels:Object.keys(a),datasets:[{label:"COVID-19 cases",data:Object.values(a),fill:!1,pointRadius:1.7,pointHitRadius:10,borderColor:"rgba(255, 200, 0, 1)",lineTension:.2,backgroundColor:"rgba(255, 200, 0, 1)"},{label:"COVID-19 deaths",data:Object.values(r),fill:!1,pointRadius:1.7,pointHitRadius:10,borderColor:"rgba(200, 0, 0, 1)",lineTension:.2,backgroundColor:"rgba(200, 0, 0, 1)"}]},p={labels:Object.keys(a),datasets:[{label:"COVID-19 cumulated cases",data:Object.values(n),fill:!1,pointRadius:1.7,pointHitRadius:10,borderColor:"rgba(255, 200, 0, 1)",lineTension:.2,backgroundColor:"rgba(255, 200, 0, 1)"},{label:"COVID-19 deaths",data:Object.values(s),fill:!1,pointRadius:1.7,pointHitRadius:10,borderColor:"rgba(200, 0, 0, 1)",lineTension:.2,backgroundColor:"rgba(200, 0, 0, 1)"}]},v={labels:Object.keys(a),datasets:[{label:"COVID-19 cases per million",data:Object.values(l),fill:!1,pointRadius:1.7,pointHitRadius:10,borderColor:"rgba(255, 200, 0, 1)",lineTension:.2,backgroundColor:"rgba(255, 200, 0, 1)"},{label:"COVID-19 deaths per million",data:Object.values(i),fill:!1,pointRadius:1.7,pointHitRadius:10,borderColor:"rgba(200, 0, 0, 1)",lineTension:.2,backgroundColor:"rgba(200, 0, 0, 1)"}]},b={labels:Object.keys(a),datasets:[{label:"COVID-19 cumulated cases",data:Object.values(o),fill:!1,pointRadius:1.7,pointHitRadius:10,borderColor:"rgba(255, 200, 0, 1)",lineTension:.2,backgroundColor:"rgba(255, 200, 0, 1)"},{label:"COVID-19 deaths",data:Object.values(u),fill:!1,pointRadius:1.7,pointHitRadius:10,borderColor:"rgba(200, 0, 0, 1)",lineTension:.2,backgroundColor:"rgba(200, 0, 0, 1)"}]},f={scales:{yAxes:[{type:"logarithmic"}]}},C=t.getCasesStartingNDaysAgoDuringMDays(2,3),y=C>t.getCasesStartingNDaysAgoDuringMDays(5,3)?c.a.createElement("img",{className:"evolution-arrow",src:"images/arrow-red-up.png",title:"Higher than the 3 previous days"}):c.a.createElement("img",{className:"evolution-arrow",src:"images/arrow-green-down.png",title:"Lower than the previous 3 days"}),E=t.getDeathsStartingNDaysAgoDuringMDays(2,3),D=E>t.getDeathsStartingNDaysAgoDuringMDays(5,3)?c.a.createElement("img",{className:"evolution-arrow",src:"images/arrow-red-up.png",title:"Higher than the 3 previous days"}):c.a.createElement("img",{className:"evolution-arrow",src:"images/arrow-green-down.png",title:"Lower than the previous 3 days"});return c.a.createElement("div",{className:"dashboard"},c.a.createElement("div",{className:"country-name"},c.a.createElement("img",{className:"flag",src:"images/flags/".concat(e,".svg")}),c.a.createElement("h1",null,t.name)),d,c.a.createElement("div",{className:"info-grid"},c.a.createElement("div",{className:"cell"},c.a.createElement("div",{className:"cell-inner",style:{float:"right"}},c.a.createElement("p",null,c.a.createElement("span",{className:"cell-title",style:{color:"#ffc800"}},"# cases")),c.a.createElement("p",{className:"cell-section"},c.a.createElement("span",{className:"cell-subtitle"},"(all time)"),c.a.createElement("br",null),c.a.createElement("span",{className:"cell-score"},t.getCases())),c.a.createElement("p",{className:"cell-section"},c.a.createElement("span",{className:"cell-subtitle"},"(all time per million)"),c.a.createElement("br",null),c.a.createElement("span",{className:"cell-score"},~~(100*t.getCasesPerMillion())/100)),c.a.createElement("p",{className:"cell-section"},c.a.createElement("span",{className:"cell-subtitle"},"(in the last day)"),c.a.createElement("br",null),c.a.createElement("span",{className:"cell-score"},t.getCasesStartingNDaysAgoDuringMDays(0,1))),c.a.createElement("p",{className:"cell-section"},c.a.createElement("span",{className:"cell-subtitle"},"(in the last 3 days)"),c.a.createElement("br",null),c.a.createElement("span",{className:"cell-score"},C),y))),c.a.createElement("div",{className:"cell"},c.a.createElement("div",{className:"cell-inner",style:{float:"left"}},c.a.createElement("p",null,c.a.createElement("span",{className:"cell-title",style:{color:"#c80000"}},"# deaths")),c.a.createElement("p",{className:"cell-section"},c.a.createElement("span",{className:"cell-subtitle"},"(all time)"),c.a.createElement("br",null),c.a.createElement("span",{className:"cell-score"},t.getDeaths())),c.a.createElement("p",{className:"cell-section"},c.a.createElement("span",{className:"cell-subtitle"},"(all time per million)"),c.a.createElement("br",null),c.a.createElement("span",{className:"cell-score"},~~(100*t.getDeathsPerMillion())/100)),c.a.createElement("p",{className:"cell-section"},c.a.createElement("span",{className:"cell-subtitle"},"(in the last day)"),c.a.createElement("br",null),c.a.createElement("span",{className:"cell-score"},t.getDeathsStartingNDaysAgoDuringMDays(0,1))),c.a.createElement("p",{className:"cell-section"},c.a.createElement("span",{className:"cell-subtitle"},"(in the last 3 days)"),c.a.createElement("br",null),c.a.createElement("span",{className:"cell-score"},E),D)))),c.a.createElement("div",{className:"plot-title"},"COVID-19 cases and deaths over time (linear scale)"),c.a.createElement(S.a,{data:g,options:{},height:100}),c.a.createElement("div",{className:"plot-title"},"COVID-19 cumulated cases and deaths over time (logarithmic scale)"),c.a.createElement(S.a,{data:p,options:f,height:100}),c.a.createElement("div",{className:"plot-title"},"COVID-19 cases and deaths over time per million population (linear scale)"),c.a.createElement(S.a,{data:v,options:{},height:100}),c.a.createElement("div",{className:"plot-title"},"COVID-19 cumulated cases and deaths over time per milion population (logarithmic scale)"),c.a.createElement(S.a,{data:b,options:f,height:100}),c.a.createElement("div",{className:"credits"},c.a.createElement("p",null,"Data from the ",c.a.createElement("a",{href:"https://www.ecdc.europa.eu/en/publications-data/download-todays-data-geographic-distribution-covid-19-cases-worldwide"},"European Centre for Disease Prevention and Control")),c.a.createElement("p",null,"\u2014 Made by ",c.a.createElement("a",{href:"https://twitter.com/jonathanlurie"},"@jonathanlurie")," :: ",c.a.createElement("a",{href:"https://github.com/jonathanlurie/covid19dashboard"},"fork me on GitHub")," \u2014")))}}]),t}(c.a.Component)),j=(a(166),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(E.a)(this,Object(D.a)(t).call(this,e))).state={countrySearch:""},a.fullCountryList=h.getAllCountries(),a}return Object(N.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.fullCountryList;""!==this.state.countrySearch&&(t=t.filter((function(t){return t.name.includes(e.state.countrySearch)})));var a=t.map((function(e){var t="images/flags/".concat(e.code,".svg");return c.a.createElement("li",{key:e.code},c.a.createElement("img",{className:"flag",src:t}),c.a.createElement("span",{className:"country-name"},c.a.createElement(C.b,{to:e.code},e.name)))}));return c.a.createElement("div",{className:"country-list"},c.a.createElement("div",{className:"title"},"COVID-19",c.a.createElement("br",null),"dashboard"),c.a.createElement("div",{className:"container"},c.a.createElement("input",{className:"searchbar",placeholder:"Type a country...",onChange:function(t){e.setState({countrySearch:t.target.value})}}),c.a.createElement("ul",null,a)))}}]),t}(c.a.Component)),O=(a(169),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(E.a)(this,Object(D.a)(t).call(this,e))).state={},a}return Object(N.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.match.params.countryCode;return e?(h.hasCountry(e)||alert("There is no data for this country."),c.a.createElement("div",{className:"main"},c.a.createElement(j,null),c.a.createElement(w,{countryCode:e}))):c.a.createElement(y.a,{to:g.defaultCountryCode})}}]),t}(c.a.Component));function k(){return c.a.createElement(C.a,null,c.a.createElement(y.d,null,c.a.createElement(y.b,{path:"/:countryCode",component:O}),c.a.createElement(y.b,{path:"/",component:O})))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function T(){return(T=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("loading data..."),e.next=3,f();case 3:console.log("done loading data"),i.a.render(c.a.createElement(k,null),document.getElementById("root"));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){T.apply(this,arguments)}()},64:function(e,t,a){e.exports=a(170)},70:function(e,t,a){}},[[64,1,2]]]);
//# sourceMappingURL=main.9725ea64.chunk.js.map